#include <stdio.h>

int main(void)
{

/* Declarations */
float ln, yrInt, mPay;
int n;

/* Enter and then read inputs */
invalid_input:
printf("Enter loan amount: \n");
scanf("%f", &ln);
printf("Enter yearly interest rate: \n");
scanf("%f", &yrInt);
printf("Enter monthly payments: \n");
scanf("%f", &mPay);
printf("Enter number of monthly payments: \n");
scanf("%d", &n);

/* If any input is negative restart program */
if ( ln < 0 || yrInt < 0 || mPay < 0 || n < 0)
{
printf("Error: Make sure all values are positive.\n");
goto invalid_input;
}

/* Display input */
printf("Loan : %12.2f | Interest: %5.2f percent | Monthly Payment: %10.2f | Number of Months: %d\n", ln, yrInt, mPay, n);
 
/* Calculate monthly interest rate */
float mInt = (yrInt / 100) / 12;

float newBal;

/* Calculate new balance */
while ( n > 0)
{
float lastPay = newBal + (newBal * mInt);
newBal = ln + (ln * mInt) - mPay;

/* if new balance is less than or equal to 0 make new balance 0 and end loop, else continue */
if (newBal <= 0)
{
printf("New balance is: 0.00\n");
printf("Last payment was : %10.2f\n", lastPay);
break;
}

/* print new balance, set loan to new balance and decrement number of months */
printf("New balance is: %10.2f\n", newBal);
ln = newBal;
n--;
}

return 0;
}